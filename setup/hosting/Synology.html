<!--
title: Synology
description: A brief guide on setting up foundry on synology.
published: true
date: 2021-11-27T14:24:02.598Z
tags: 
editor: ckeditor
dateCreated: 2020-11-10T02:09:22.459Z
-->

<p>Setting up Foundry on Synology is similar in execution as a base linux operation with some slight changes in the steps. Some things such as directory locations can be adjusted based on your own setup. If anyone has suggestions for other ways to execute the server instance please, by all means, share. &nbsp;</p>
<h1>Basic Setup</h1>
<ol>
  <li>Enable admin user in DSM</li>
</ol>
<figure class="image image_resized" style="width:58.49%;"><img src="/images/screen_shot_2020-11-09_at_8.42.18_pm.jpg">
  <figcaption>enable admin account</figcaption>
</figure>
<p>2. Enable SSH in DSM</p>
<figure class="image image_resized" style="width:58.5%;"><img src="/images/screen_shot_2020-11-09_at_8.28.02_pm_copy.jpg">
  <figcaption>enable SSH</figcaption>
</figure>
<p>3. Install node.js to synology using DSM, I don't know if both are needed but I did it just in case and it seems to work just fine.</p>
<figure class="image image_resized" style="width:57.99%;"><img src="/images/screen_shot_2020-11-09_at_8.54.29_pm.jpg"></figure>
<p>4. Create the foundry directories (the exact location of your directories is up to personal preference)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; In this example I have created my directories in home/Drive/FoundryVTT/&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The data folder will contain your modules, worlds, and configurations<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The other folder contains the application files</p>
<figure class="image image_resized" style="width:58.29%;"><img src="/images/screen_shot_2020-11-09_at_8.51.37_pm.png">
  <figcaption>directories</figcaption>
</figure>
<p>5. Download your node.js Foundry instance, this is located in your account page under purchased licenses. Download this file with DSM and extract the contents of the zip file into your foundryvtt (or whatever you chose) folder. &nbsp;It should look like below.</p>
<figure class="image image_resized" style="width:59.2%;"><img src="/images/screen_shot_2020-11-09_at_8.58.20_pm.jpg"></figure>
<h1>Running a One-Time FoundryVTT instance</h1>
<p><strong>SSH into your synology NAS, this is using your SSH client of choice. I use MacOS and utilize the built in terminal option. &nbsp;Once you open your terminal/SSH client you'll connect to it:</strong></p>
<blockquote>
  <p>'yourusername@yourcomputername ~ % ssh admin@&lt;insert NAS IP&gt;</p>
</blockquote>
<p><strong>Enter your password for the NAS and then enter the following:&nbsp;</strong></p>
<blockquote>
  <p>sudo -i</p>
</blockquote>
<p><strong>You will now be in the root directory for your NAS, this next step changes depending on where you put your VTT, the volumes of your NAS and your file structure, these are the commands I use.</strong></p>
<blockquote>
  <p>cd /volume1/homes/&lt;hostname&gt;/Drive/FoundryVTT<br>node foundryvtt/resources/app/main.js --dataPath=foundrydata</p>
</blockquote>
<p>Once you close the SSH window this instance will stop working, it is a one time launch option.</p>
<h1>Running your FoundryVTT server continuously</h1>
<p>If you would like to use your foundry VTT server AFTER closing the SSH client window then you'll need to use Forever. &nbsp;To install and operate forever on your system run the following commands:</p>
<blockquote>
  <p>npm&nbsp;install&nbsp;forever&nbsp;-g</p>
</blockquote>
<p>You MIGHT need to do this with sudo, but if you have already gained root this shouldn't be required. Once forever has been installed you'll change the start-up command to the following, note you do not need to use the ‘node’ command for this to work:</p>
<blockquote>
  <p>forever start &lt;directory to main.js&gt; --dataPath=&lt;directory to data path&gt;</p>
</blockquote>
<p>Finally to stop the foundry server you'd use the following:</p>
<blockquote>
  <p>forever stop &lt;directory to main.js&gt; --dataPath=&lt;directory to data path&gt;</p>
</blockquote>
<h3>Notes</h3>
<ul>
  <li>Using this setup you will need to keep your SSH client open while the server runs, unless you use Forever to keep it running.</li>
  <li>If you close the SSH client without properly shutting down the foundry instance or utilizing Forever it will make you reboot your NAS before it will allow you to launch FoundryVTT again.</li>
  <li>To properly shutdown your foundry instance, ctrl-c (or similar hotkey in your client) shuts down the instance properly (note using Forever you need to use a different shutdown process).</li>
  <li>I am a novice at these processes so I am open to automation suggestions or similar! - Diabolicbutterfly</li>
</ul>
<h1>Alternate way for hosting Foundry VTT on a Synology NAS using Docker</h1>
<p>This is a different way for hosting Foundry VTT using Docker. This is quite simple recipe, maybe the simplest <strong>for non technical people</strong>, with a specific combination of services that make life easier.&nbsp;</p>
<p>The goal of this tutorial is to :</p>
<ul>
  <li>Host VTT Foundry on your Synology NAS</li>
  <li>Set up HTTPS provided that you have a domain name somewhere</li>
  <li>Make it run permanently (you can actually toggle it on or off)</li>
</ul>
<h3>Prerequisites</h3>
<ul>
  <li>Have a Foundry VTT license</li>
  <li>Have a domain name</li>
  <li>Have an up to date Synology NAS (this is based on DSM 6.2.4)</li>
</ul>
<h3>Have your domain or subdomain point to your NAS public IP</h3>
<p>I'm already using a synology adress such as myquickconnectid<strong>.synology.me</strong> in order to connect to my NAS. It supports HTTPS (port 443). Since this adress is already used, I need another one for Foundry VTT. &nbsp;Make your to make it point to your NAS public IP. This kind of DNS configuration can take several hours or a couple of days.</p>
<h3>Install Docker your NAS</h3>
<p>In the package manager, install “Docker”</p>
<h3>Prepare the <a href="https://github.com/felddy">felddy</a>/<a href="https://github.com/felddy/foundryvtt-docker"><strong>foundryvtt-docker</strong></a> image</h3>
<p>In Docker, go to Registry and look for “felddy”. Download the felddy/foundryvtt-docker image, when prompted choose the “release” tag.</p>
<p>Now, in the Image section of Docker, Launch this image (this creates a “Container”, that is an instance of this image), you will be prompted for configuration, go directly to <strong>advanced settings</strong>:</p>
<ul>
  <li>Enable auto-restart: checked</li>
  <li>Declare a folder for Foundry VTT to store its files. <strong>Volume → Add Folder</strong>:<ul>
      <li>Choose a folder in your own NAS volumes for Foundry VTT data and config</li>
      <li>Type “/data” for the mounted path</li>
      <li>It is useful to access such files directly, otherwise they are embedded in the container</li>
    </ul>
  </li>
  <li>Leave default port settings</li>
  <li>In the Environment tab, add the CONTAINER_PRESERVE_CONFIG variable and set it to <strong>true</strong></li>
</ul>
<p><strong>Apply these settings without running the container yet (uncheck “Run this container…”)</strong></p>
<p>Now go the <strong>Container </strong>section in Docker and <strong>Edit</strong> the details of your container, go to the <strong>Environment</strong> tab, and add a <strong>FOUNDRY_RELEASE_URL</strong> variable, leave it empty for now.</p>
<h3>Get a temporary Foundry VTT Linux/NodeJS download URL</h3>
<p>You need to be logged in https://foundryvtt.com/</p>
<p>Go to your account page, and click Purchased Licences button.</p>
<p><strong>Make sure you select the Linux/NodeJS operating system selected </strong>and click the <strong>Timed URL </strong>button.</p>
<p>You now have 5 minutes to paste this link into the value of the FOUNDRY_RELEASE_URL variable of your container.</p>
<p>Apply your change and <strong>Start</strong> the container, you can use the toggle on the right for starting or stopping the container.</p>
<h3>Test that Foundry VTT runs locally in HTTP</h3>
<p>Assuming your are on your local network with the NAS, use a web browser connect to your NAS on port 30000. Ex: http://mynasnameorip:30000/</p>
<p>Virtual VTT should run there.</p>
<p>If not you can go the Container <strong>Details</strong>, in the <strong>Log</strong> tab. This gives you the execution details on what's going on in the Container.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
